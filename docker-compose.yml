version: '3.8'
services:
  monitor:
    build:
      context: .
      dockerfile: Dockerfile.monitor
    container_name: fds_monitor
    environment:
      - MONITOR_DB_PATH=/data/kick_monitor.sqlite3
      - CHANNELS_FILE=/data/channels.txt
    volumes:
      - data:/data
    restart: unless-stopped

  web:
    build:
      context: ./web-dashboard
      dockerfile: Dockerfile
    container_name: fds_web
    ports:
      - "3034:3034"
    environment:
      - PORT=3034
      - WEB_DASH_DEBUG=0
      - MONITOR_DB_PATH=/data/kick_monitor.sqlite3
      - FDS_DB_PATH=/data/fds_bot.db
    volumes:
      - ./web-dashboard:/app
      - data:/data
    depends_on:
      - monitor
    restart: unless-stopped
volumes:
  data:
